{% extends "base.html" %}
{% block content %}

{% if current_project %}

    <h2>{{ current_project.name }}</h2>

    <!-- <h3>Add Task</h3> -->
    <form method="post" action="/projects/{{ current_project.id }}/tasks">
        <input name="title" placeholder="Task title" required>
        <input type="date" name="due_date" required>
        <select name="priority">
            <option>High</option>
            <option>Medium</option>
            <option>Low</option>
        </select>
        <button>Add</button>
    </form>

    <!-- <h3>Tasks</h3> -->
    <br>
    <ul>
    {% for task in current_project.tasks %}
        <li class="{% if task.done %}done{% endif %}">

            <form method="post" action="/tasks/{{ task.id }}/toggle" style="display:inline">
                <button>âœ”</button>
            </form>

            <a href="/tasks/{{ task.id }}/edit">âœï¸ </a>

            <span class="task-meta {{ task.priority|lower }}">
                {% if task.priority == 'High' %}ğŸ”´{% endif %}
                {% if task.priority == 'Medium' %}ğŸŸ¡{% endif %}
                {% if task.priority == 'Low' %}ğŸŸ¢{% endif %}
                {{ task.due_date.strftime('%d %b') if task.due_date else 'â€”' }}
            </span>
            
            {{ task.title }}
        </li>
    {% endfor %}
    </ul>

{% else %}
    <p>Select a project from the left.</p>
{% endif %}

{% endblock %}
